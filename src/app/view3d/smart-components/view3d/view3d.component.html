<div id="canvaswrapper">
    <canvas *ngrxLet="{ 
        transducers: transducers$, 
        environment: environment$ 
    } as shared" #view3dcanvas>
    <ng-container *appTransducerBuffer="scene; transducers: shared.transducers, let buffer = ueb;">
        <app-excitation-renderer
            [scene]="scene"
            [transducers]="shared.transducers" 
            [selection]="selection$ | async"
            (hovered)="transducerHovered($event)" />
        <app-rayleigh-integral-renderer *ngIf="rayleighEnabled$ | async"
            [UEB]="buffer"
            [scene]="scene"
            [transducers]="shared.transducers" 
            [environment]="shared.environment" 
            [aspect]="rayleighAspect$ | async" />
        <app-farfield-renderer *ngIf="farfieldEnabled$ | async"
            [UEB]="buffer"
            [scene]="scene"
            [transducers]="shared.transducers" 
            [environment]="shared.environment" />
        <ng-content></ng-content>
    </ng-container>
    </canvas>
</div>